<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>

  <!-- LOAD STYLES -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/style.css">

  <!-- LOAD LIBRARIES -->
  <script src="js/libs/jquery.min.js"></script>
  <script src="js/libs/Browserdetect.js"></script>
  <script src="js/libs/vanilla-tilt.min.js"></script>
  <script src="js/libs/three.min.js"></script>
  <script src="js/ImprovedNoise.js"></script>
  <script src="js/Detector.js"></script>
  <script src="js/shaders/CopyShader.js"></script>
  <script src="js/postprocessing/EffectComposer.js"></script>
  <script src="js/postprocessing/RenderPass.js"></script>
  <script src="js/postprocessing/MaskPass.js"></script>
  <script src="js/postprocessing/ShaderPass.js"></script>
  <script src="js/shaders/FilmShader.js"></script>
  <script src="js/shaders/VerticalTiltShiftShader.js"></script>
  <script src="js/shaders/HorizontalTiltShiftShader.js"></script>
  <script src="js/shaders/VignetteShader.js"></script>

  <!-- LOAD CORE SCRIPTS -->
  <script src="js/main.js"></script>
</head>

<body>

  <script>
    if (!Detector.webgl) Detector.addGetWebGLMessage();

    let SCREEN_WIDTH = window.innerWidth;
    let SCREEN_HEIGHT = window.innerHeight;
    let renderer, camera, scene, moverGroup, floorGeometry, floorMaterial, pointLight, pointLight2;
    let FLOOR_RES = 60;
    let FLOOR_HT = 650;
    let stepCount = 0;
    let noiseScale = 9.5;
    let noiseSeed = Math.random() * 100;
    let FLOOR_WIDTH = 6000;
    let FLOOR_DEPTH = 5000;
    let MOVE_SPD = 1.0;
    let mouseX = 0;
    let mouseY = 0;
    let windowHalfX = window.innerWidth / 2;
    let windowHalfY = window.innerHeight / 2;

    let snoise = new ImprovedNoise();
    let textureLoader = new THREE.TextureLoader();
    let composer, shaderTime = 0,
      filmPass, renderPass, copyPass, effectVignette;
    document.addEventListener('mousemove', onDocumentMouseMove, false);

    function onDocumentMouseMove(event) {
      mouseX = (event.clientX - (windowHalfX)) * 0.3;
      mouseY = (event.clientY - (windowHalfY)) * 0.3;
    }

    function params() {
      let bluriness = 5;
      hblur.uniforms['h'].value = bluriness / window.innerWidth;
      vblur.uniforms['v'].value = bluriness / window.innerHeight;
      hblur.uniforms['r'].value = vblur.uniforms['r'].value = 0.5;
      filmPass.uniforms.grayscale.value = 0;
      filmPass.uniforms['sCount'].value = 2;
      filmPass.uniforms['sIntensity'].value = 0.2;
      filmPass.uniforms['nIntensity'].value = 1;
      effectVignette.uniforms["offset"].value = 1.0;
      effectVignette.uniforms["darkness"].value = 1.3;
    }

    init();
    animate();

    function init() {
      camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 4000);
      camera.position.z = 2750;

      scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x1c3c4a, 0.00045);

      let hemisphereLight = new THREE.HemisphereLight(0xe3feff, 0xe6ddc8, 0.7);
      scene.add(hemisphereLight);
      hemisphereLight.position.y = 300;

      //middle light
      let centerLight = new THREE.SpotLight(0xb7f9ff, 1);
      scene.add(centerLight);
      centerLight.position.set(2500, 300, 2000);
      centerLight.penumbra = 1;
      centerLight.decay = 5;

      pointLight = new THREE.PointLight(0xe07bff, 1.5);
      pointLight.position.z = 200;
      scene.add(pointLight);

      pointLight2 = new THREE.PointLight(0xff4e00, 1.2);
      pointLight2.position.z = 200;
      scene.add(pointLight2);

      moverGroup = new THREE.Object3D();
      scene.add(moverGroup);

      let floorGroup = new THREE.Object3D();
      let floorMaterial = new THREE.MeshPhongMaterial({
        color: 0xeeeeee, //diffuse							
        side: THREE.DoubleSide,
        blending: THREE.AdditiveBlending,
        wireframe: true
      });

      //add extra x width
      floorGeometry = new THREE.PlaneGeometry(FLOOR_WIDTH + 1200, FLOOR_DEPTH, FLOOR_RES, FLOOR_RES);
      let floorMesh2 = new THREE.Mesh(floorGeometry, floorMaterial);

      floorMesh2.position.y = 20;
      floorMesh2.position.z = 5;
      floorGroup.add(floorMesh2);
      scene.add(floorGroup);
      floorMesh2.rotation.x = Math.PI / 1.65;
      floorGroup.position.y = 180;

      renderer = new THREE.WebGLRenderer({
        antialias: true
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x1c3c4a);
      document.body.appendChild(renderer.domElement);

      //POST PROCESSING
      //Create Shader Passes
      renderPass = new THREE.RenderPass(scene, camera);
      hblur = new THREE.ShaderPass(THREE.HorizontalTiltShiftShader);
      vblur = new THREE.ShaderPass(THREE.VerticalTiltShiftShader);
      effectVignette = new THREE.ShaderPass(THREE.VignetteShader);
      copyPass = new THREE.ShaderPass(THREE.CopyShader);
      filmPass = new THREE.ShaderPass(THREE.FilmShader);

      composer = new THREE.EffectComposer(renderer);
      composer.addPass(renderPass);
      composer.addPass(hblur);
      composer.addPass(vblur);
      composer.addPass(filmPass);
      composer.addPass(effectVignette);
      composer.addPass(copyPass);
      copyPass.renderToScreen = true;

      params();

      setWaves();
      window.addEventListener('resize', onWindowResize, false);
    }

    function setWaves() {
      stepCount++;
      moverGroup.position.z = -MOVE_SPD;
      let i;
      let ipos;
      let offset = stepCount * MOVE_SPD / FLOOR_DEPTH * FLOOR_RES;

      for (i = 0; i < FLOOR_RES + 1; i++) {
        for (var j = 0; j < FLOOR_RES + 1; j++) {
          ipos = i + offset;
          if ((i > 30) || (j < 12) || (j > 48)) {
            floorGeometry.vertices[i * (FLOOR_RES + 1) + j].z = snoise.noise(ipos / FLOOR_RES * noiseScale,
              j / FLOOR_RES * noiseScale, noiseSeed) * FLOOR_HT;
          } else if (i > 25 && i < 30) {
            floorGeometry.vertices[i * (FLOOR_RES + 1) + j].z = snoise.noise(ipos / FLOOR_RES * noiseScale,
              j / FLOOR_RES * noiseScale, noiseSeed) * (FLOOR_HT / 1.2);
          } else {
            floorGeometry.vertices[i * (FLOOR_RES + 1) + j].z = snoise.noise(ipos / FLOOR_RES * noiseScale,
              j / FLOOR_RES * noiseScale, noiseSeed) * (FLOOR_HT / 2);
          }
        }
      }
      floorGeometry.verticesNeedUpdate = true;
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();

      renderer.setSize(window.innerWidth, window.innerHeight);
      composer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      render();
    }

    function render() {
      let timer = -0.0002 * Date.now();

      pointLight.position.x = 2400 * Math.cos(timer);
      pointLight.position.z = 2400 * Math.sin(timer);

      pointLight2.position.x = 1800 * Math.cos(-timer * 1.5);
      pointLight2.position.z = 1800 * Math.sin(-timer * 1.5);

      camera.position.x += (mouseX - camera.position.x) * .05;
      camera.position.y += (-mouseY - camera.position.y) * .05;
      camera.lookAt(scene.position);

      setWaves();
      composer.render(0.1);
    }
  </script>

  <section>

    <!-- HOME PAGE -->
    <div id="home" class="active">
      <div class="main-menu">
        <span class="link">work</span>
        <span class="link">about</span>
      </div>
    </div>

    <!-- WORK PAGE -->
    <div id="work">
      <div class="divider">
        <span>ASSIGNMENTS</span>
      </div>
      <div class="container">

        <div class="box">
          <div class="content">
            <span class="client">Smart Mobile | DUO app 1</span><br>
            <span class="project">TUTA | The Ultimate Travel App</span>
          </div>
          <img src="img/thumbnails/TUTA.jpg" class='img' id="t_tuta">
        </div>

        <div class="box">
          <div class="content">
            <span class="client">Smart Mobile | DUO app 2</span><br>
            <span class="project">Info-19 | Less data sharing, better info</span>
          </div>
          <img src="img/thumbnails/LocalBuddy.jpg" class='img' id="t_localbuddy">
        </div>

      </div>
      <!-- <div class="divider">
        <span>PROJECTS</span>
      </div>
      <div class="container">

        <div class="box">
          <div class="content">
            <span class="client">Sprint X</span><br>
            <span class="project">YASS | Your App to Share Stories</span>
          </div>
          <img src="img/thumbnails/YASS.jpg" class='img'>
        </div>

      </div> -->
    </div>

    <!-- ABOUT PAGE -->
    <div id="about">
      <div class="divider">
        <span>BIO</span>
      </div>
      <div class="container">
        <div class="profile"></div>
        <div class="info">Hey there, I am Jorrit Verstappen, 22 years old and I study ICT & Media Design with a
          specialisation in App
          development at Fontys in Eindhoven. My ambition is to become a front-end developer or an app developer.
          <br>
          <br>
          I like experimenting with new languages and gaining more experience with the ones I think are crucial for web
          development like, HTML, CSS(SCSS) and JavaScript. Languages that I am confident in are also these 3 and for
          frameworks I prefer using Vue.
        </div>
      </div>
      <div class="divider">
        <span>CONTACT</span>
      </div>
      <div class="icons">
        <a target="blank" href="mailto: jorrit@jorritv.nl"><img src="/img/icons/mail.svg"></a>
        <a target="blank" href="https://www.linkedin.com/in/jorrit-verstappen-281523b8/"><img
            src="/img/icons/linkedin.svg"></a>
      </div>
    </div>

    <!-- TOP MENU -->
    <div id="top-menu">
      <div class="bg"></div>
      <span class="link">home</span>
      <span class="link">work</span>
      <span class="link">about</span>
    </div>

    <!-- WORK INFO PAGES -->
    <div id="tuta">
      <div class="container">
        <span class="title">TUTA | The Ultimate Travel App</span>
        <div class="divider">
          <span>INFO</span>
        </div>
        <div class="info">
          TUTA is an app I made together with Danny Vu during our first semester of Smart Mobile at Fontys University.
          The idea of the app was to give an overview of the user's preferred travel routes for trains and busses so
          they wouldn't have to switch between the NS app and 9292 for example. Later we also added in another box
          containing a small graph showing if there would be any rain at the final destination of the travel.
          <br><br>
          I focused mainly on the design and front-end part of the app and Danny on the back-end.
          <br>
          The techniques we used for this app are: Vue, Expressjs, Heroku and the APIs from NS and 9292.
        </div>
        <div class="divider">
          <span>LOGO</span>
        </div>
        <div class="info">
          Below are the different iterations for the logo of the app. We both agreed on a logo that would contain
          something with the letter T from TUTA and go with the design so a bit more curvy and no straight lines.
          <br><br>
          The difference between the first 2 iterations is the greatest since the logo itself got changed a lot since
          most users were more appealed by the new look and the difference between iteration 2 and 3 is the background.
          The last iteration is the final design we made and also the one we used as app icon when installed on the home
          page.
        </div>
        <div class="logos">
          <img src="/img/logos/Iteration 1.png">
          <img src="/img/logos/Iteration 2.png">
          <img src="/img/logos/Iteration 3.png">
        </div>
      </div>
    </div>

    <div id="info19">
      <div class="container">
        <span class="title">Info-19 | Less data sharing, better info</span>
        <div class="divider">
          <span>INFO</span>
        </div>
        <div class="info">
          TUTA is an app I made together with Danny Vu during our first semester of Smart Mobile at Fontys University.
          The idea of the app was to give an overview of the user's preferred travel routes for trains and busses so
          they wouldn't have to switch between the NS app and 9292 for example. Later we also added in another box
          containing a small graph showing if there would be any rain at the final destination of the travel.
          <br><br>
          I focused mainly on the front-end part of the app and Danny on the back-end.
          <br>
          The techniques we used for this app are: Vue, Expressjs, Heroku and the APIs from NS and 9292.
        </div>
      </div>
    </div>

  </section>

  <script>
    if (BrowserDetect.browser != 'Firefox') {
      VanillaTilt.init(document.querySelectorAll(".box"), {
        max: 4,
        speed: 1500,
        scale: 1.04,
        reverse: true
      });
    }
  </script>

</body>

</html>